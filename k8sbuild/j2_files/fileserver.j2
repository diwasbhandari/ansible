server {
        listen 80 default_server;
        listen [::]:80 default_server;

        # SSL configuration
        #
        # listen 443 ssl default_server;
        # listen [::]:443 ssl default_server;
        #
        # Self signed certs generated by the ssl-cert package
        # Don't use them in a production server!
        #
        # include snippets/snakeoil.conf;

        root /var/www/file;

        # Add index.php to the list if you are using PHP
        index index.html index.htm index.nginx-debian.html;

        server_name _;

        location / {
                #add_header 'Access-Control-Allow-Origin' '*';
                autoindex on;
                #root /var/www/file
                # First attempt to serve request as file, then
                # as directory, then fall back to displaying a 404.
                try_files $uri $uri/ =404;
        }

        location ~* \.(eot|otf|ttf|woff|woff2|mp4|webm|mpg|ogg|mov|png|jpg|webp|mp3|wav|ogg|webm)$ {
                add_header Access-Control-Allow-Origin *;
        }



        location /upload {
          auth_basic                 "Restricted Upload";
          auth_basic_user_file       basic.htpasswd;
          limit_except POST          { deny all; }
          client_body_temp_path      /tmp/;
          client_body_in_file_only   on;
          client_body_buffer_size    128K;
          client_max_body_size       1000M;
          proxy_pass_request_headers on;
          proxy_set_header           X-FILE $request_body_file;
          proxy_set_body             off;
          proxy_redirect             off;
          proxy_pass                 http://localhost/file;
        }
}
